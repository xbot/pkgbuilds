# Maintainer: Lenin Lee <lenin.lee at gmail a-dot com>

pkgname=lovewallpaper-hd
pkgver=1.1.1
pkgrel=3
pkgdesc="A wallpaper app from lovebizhi.com."
arch=('i686' 'x86_64')
url="http://www.lovebizhi.com"
license=('custom')
depends=('libwebkit3' 'json-glib' 'libgee' 'gtk3' 'libsoup' 'libnotify')
makedepends=('rpmextract')
install=${pkgname}.install

if [ "$CARCH" = "i686" ]; then
    _bit='32bit'
    md5sums=('8bfdf041b2c866a9431fdd2373c164ff')
elif [ "$CARCH" = "x86_64" ]; then
    _bit='64bit'
    md5sums=('4f7826b57342578bd77219e68cbd0d37')
fi

source=("LoveWallpaper_fedora_x86_64.rpm::http://www.lovebizhi.com/linux_fedora_${_bit}")

package() {
    rpmextract.sh *.rpm
    cp -r "$srcdir"/{opt,usr} "$pkgdir"
    sed -i '/^Path=/d' "$pkgdir"/usr/share/applications/lovewallpaper.desktop
    sed -i '/^Exec=lovewallpaper/ s/lovewallpaper/\/opt\/lovewallpaper\/lovewallpaper/g' "$pkgdir"/usr/share/applications/lovewallpaper.desktop
    install -d "$pkgdir"/{opt,usr/share/{applications,glib-2.0/schemas}}
    install -m 644 "$srcdir/opt/lovewallpaper/script/lovewallpaper.gschema.xml" "$pkgdir/usr/share/glib-2.0/schemas/"
}
